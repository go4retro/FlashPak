1 CLEAR 200,&H3BFF
2 TM=&H3C00
10 LOADM"FLASH"
20 INPUT "CMD (E,S,R,P,M,F,L):";A$
40 IF A$="E" THEN GOSUB 100:GOTO 20
30 IF A$="S" THEN GOSUB 200:GOTO 20
50 IF A$="R" THEN GOSUB 300:GOTO 20
50 IF A$="P" THEN GOSUB 400:GOTO 20
50 IF A$="M" THEN GOSUB 500:GOTO 20
50 IF A$="F" THEN GOSUB 600:GOTO 20
60 IF A$="L" THEN GOSUB 700:GOTO 20
99 GOTO 20
100 POKE 4000,0:REM BANK
110 POKE 4001,0
120 POKE 4002,0
140 EXEC 4010
150 EXEC 4010+6:IF PEEK(4003) AND 128 = 0 THEN 150
160 RETURN
200 INPUT "BANK";BA
210 INPUT "ADDRESS";AD
220 INPUT "DATA";DA
230 POKE 4000,BA
240 POKE 4001,AD/256
250 POKE 4002,AD AND 255
260 POKE 4003,DA
270 EXEC 4010+3
280 RETURN
300 INPUT "BANK";BA
310 INPUT "ADDRESS";AD
330 POKE 4000,BA
340 POKE 4001,AD/256
350 POKE 4002,AD AND 255
360 EXEC 4010+6
370 PRINT PEEK(4003)
380 RETURN
400 INPUT "BANK";BA
410 INPUT "ADDRESS";AD
420 INPUT "LEN";LE
430 POKE 4000,BA
440 POKE 4001,AD/256
450 POKE 4002,AD AND 255
460 POKE 4004,TM/256
470 POKE 4005,TM AND 255
480 POKE 4006,LE / 256
481 POKE 4007,LE AND 255
482 FOR T=0TO LE - 1:POKE T+TM,T:NEXT
485 EXEC 4010+12
487 FOR T=0TO LE - 1:PRINT PEEK(T+TM);:NEXT
488 PRINT
490 RETURN
500 INPUT "BANK";BA
510 INPUT "ADDRESS";AD
520 INPUT "LEN";LE
530 POKE 4000,BA
540 POKE 4001,AD/256
550 POKE 4002,AD AND 255
560 POKE 4004,TM/256
570 POKE 4005,TM AND 255
580 POKE 4006,LE / 256
581 POKE 4007,LE AND 255
582 FOR T=0TO LE - 1:POKE T+TM,0:NEXT
585 EXEC 4010+15
586 FOR T=0TO LE - 1:PRINT PEEK(T+TM);:NEXT
589 PRINT
590 RETURN
600 POKE 4000,BA
610 EXEC 4010+9
620 PRINT PEEK(4008)
630 RETURN
700 INPUT "FILE";FI$
710 INPUT "BANK";BA
720 GOSUB 1000:RETURN
1000 REM PROGRAM FILE
1010 AD = 0
1020 POKE 4001,AD/256
1030 POKE 4002,AD AND 255
1040 POKE 4004,TM/256
1050 POKE 4005,TM AND 255
1060 OPEN "D",#1,FI$,1
1070 FIELD #1,1 AS D$
1075 PRINT FI$;" IS";LOF(1);"BYTES IN SIZE"
1080 LE = LOF(1):IF LE > &H4000 THEN 1400
1085 IF LE > &H3F00 THEN LE = &H3F00
1090 I = 0:J = 0
1100 GET #1,I+1
1110 DA = ASC(D$)
1120 POKE TM + J,DA
1130 I = I + 1:J = J + 1
1140 IF J < 1024 AND I < LE THEN 1100
1150 POKE 4006,J/256
1160 POKE 4007,J AND 255
1165 PRINT:PRINT "WRITING ";J;"BYTES TO ADDR:";AD
1170 EXEC 4010+12
1180 IF I = LE THEN 1240
1190 AD = AD + 1024
1200 POKE 4001,AD/256
1210 POKE 4002,AD AND 255
1220 J = 0
1230 GOTO 1100
1240 CLOSE #1
1250 RETURN
1400 PRINT "ERROR: TOO LARGE"
1410 END

